# Discord 명령어 (한글)

이 문서는 운영에서 사용할 한글 슬래시 커맨드 목록을 정리합니다.

## 시스템
- `/핑`
  - 설명: 봇 동작 확인
  - 응답: `pong` (ephemeral)

## 홈 대시보드
- `/홈 생성 채널:#봇홈`
  - 설명: 홈 대시보드 메시지(임베드+버튼) 생성
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/홈 갱신`
  - 설명: 저장된 홈 대시보드 메시지 내용을 최신 상태로 갱신
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/홈 설치 채널:<선택>`
  - 설명: 홈 메시지를 보장 생성/복구하고 핀 상태를 점검
  - 옵션:
    - `채널` 미입력 시 현재 채널 사용
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- 홈 구성 (HOME_V2 활성 기준)
  - 1행: `[회의 시작/회의 종료] [과제 등록]`
  - 2행: `더보기` 셀렉트
    - 안건 설정
    - 과제 전체 보기
    - 모각코 전체 보기
    - 내 기록(개인)
    - 설정/도움말
  - `내 기록(개인)` 응답은 ephemeral로 표시되어 채널 스팸을 줄임

## 안건
- `/안건 생성 링크:<http/https> 제목:<선택>`
  - 설명: 오늘(Asia/Seoul) 안건 링크 생성/수정
  - 권한: 운영진

- `/안건 오늘`
  - 설명: 오늘 안건 링크 조회
  - 권한: 전체

- `/안건 최근 일수:<선택, 기본 7>`
  - 설명: 최근 N일 안건 링크 조회
  - 권한: 전체

## 회의
- `/회의 시작 채널:#회의채널`
  - 설명: 지정 채널에 "회의 시작" 임베드 게시 후 메시지 기반 스레드 생성
  - 추가 동작:
    - 회의 템플릿 메시지 자동 생성
    - 오늘 안건이 있으면 스레드에 안건 링크 버튼 자동 첨부
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/회의 종료`
  - 설명: 회의 요약을 생성하고 회의를 종료
  - V2 활성(`FEATURE_MEETING_SUMMARY_V2=true`) 시:
    - 수집 범위 기반 요약 생성 (`start ~ end+buffer`)
    - 구조화(`/결정`, `/액션`, `/투두`) + 추출 결과 병합
    - 요약 통계(결정/액션/TODO/참여자) 표시
    - 요약 메시지 액션: `요약 재생성`, `결정 추가`, `액션 추가`, `원문 보기/메시지 수 N개`
    - 요약 메시지는 가능하면 edit로 갱신(중복 게시 방지)
  - V2 비활성 시 기존 MVP0 요약 동작 유지
  - 공통 동작: 종료 임베드 게시 후 스레드 아카이브
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- 회의 안건 명령 통합
  - 안건 등록/수정: `/안건 생성 링크:<http/https> 제목:<선택>`
  - 안건 조회: `/안건 오늘`

- `/결정 내용:<텍스트>`
  - 설명: 진행 중 회의에 결정 항목을 구조화 저장
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/액션 내용:<텍스트> 담당자:<선택> 기한:<선택 YYYY-MM-DD>`
  - 설명: 진행 중 회의에 액션 항목을 구조화 저장
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/투두 내용:<텍스트>`
  - 설명: 진행 중 회의에 TODO 항목을 구조화 저장
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/회의 항목조회`
  - 설명: 진행 중 회의의 구조화 항목(결정/액션/투두)을 ID와 함께 조회
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

- `/회의 항목취소 아이디:<숫자>`
  - 설명: 구조화 항목을 ID 기준으로 취소(소프트 삭제)
  - 권한: 운영진(미설정 초기에는 Manage Server/Administrator)

## 회의 음성요약 (Skeleton)
- `/회의음성 시작 아이디:<id 또는 threadId> 채널:<voice>`
  - 설명: 음성요약 시작 요청
  - 현재 정책: `VOICE_SUMMARY_ENABLED=false` 기본값에서는 아래 메시지로 차단
    - `현재 음성요약 기능은 비활성화 상태입니다(관리자 설정 필요).`
  - 비활성 상태에서는 DB job 생성/상태전이를 수행하지 않음
  - enabled=true일 때만 `voice_summary_jobs` 생성 및 상태전이(skeleton) 수행
  - 권한: 운영진

- `/회의음성 종료 아이디:<id 또는 threadId>`
  - 설명: 음성요약 종료 요청
  - 현재 정책: 비활성 시 동일 메시지로 차단 (실제 녹음/전사 없음)
  - 권한: 운영진

- `/회의음성 상태 아이디:<id 또는 threadId>`
  - 설명: 현재 음성요약 설정/상태 조회
  - 현재 정책: 비활성 상태에서는 동일 비활성 안내만 응답
  - 권한: 운영진

- 향후 활성화 TODO
  - Java 25 + JDA 6.3 + DAVE 검토
  - ffmpeg/whisper 파이프라인 운영 검증 후 활성화

## 모각코 채널 설정
- `/모각코 채널 등록 채널:<voice>`
  - 설명: 집계 대상 모각코 음성채널 등록
  - 권한: 운영진

- `/모각코 채널 해제 채널:<voice>`
  - 설명: 집계 대상 모각코 음성채널 제거
  - 권한: 운영진

- `/모각코 채널 목록`
  - 설명: 등록된 모각코 채널 목록 조회
  - 권한: 운영진

## 모각코 통계
- `/모각코 랭킹 기간:<week|month> 인원:<선택, 기본 10>`
  - 설명: 기간별 누적시간 랭킹
  - 권한: 전체

- `/모각코 내정보 기간:<week|month>`
  - 설명: 내 누적시간/참여일/참여율 조회
  - 권한: 전체

## 과제
- `/과제 등록`
  - 설명: 과제 등록
  - 필수 옵션:
    - `제목` (예: `3주차 API 과제 제출`)
    - `링크` (http/https)
    - `알림` (예: `2026-03-01 21:30`, KST)
    - `마감` (예: `2026-03-02 23:59`, KST)
  - 선택 옵션:
    - `채널` (기본: 현재 채널)
    - `역할` (지정 시 해당 역할만 멘션)
    - `임박알림옵션` (프리셋: 기본/당일 집중/마감 직전)
    - `임박알림` (직접입력 예: `24,3,1`, 프리셋보다 우선)
    - `마감메시지` (마감 후 커스텀 메시지)
  - 권한: 운영진

- `/과제 목록`
  - 설명: 과제 전체 목록 조회
  - 권한: 전체

- `/과제 목록 상태:PENDING`
  - 설명: 미완료 과제만 조회
  - 권한: 전체

- `/과제 목록 상태:대기`
  - 설명: 한글 상태값으로 미완료 과제 조회 (`대기/완료/종료` 지원)
  - 권한: 전체

- `/과제 목록 상태:완료`
  - 설명: 완료된 과제만 조회
  - 권한: 전체

- `/과제 목록 상태:종료`
  - 설명: 마감 처리(CLOSED)된 과제만 조회
  - 권한: 전체

- `/과제 상세 아이디:42`
  - 설명: 과제 상세 확인(역할/마감/임박알림/마감메시지 포함)
  - 권한: 전체

- `/과제 완료 아이디:42`
  - 설명: 과제 완료 처리
  - 권한: 운영진

- `/과제 삭제 아이디:42`
  - 설명: 과제 삭제(또는 취소) 처리
  - 권한: 운영진

- 목록 노출 정책
  - 삭제(취소)된 과제는 `/과제 목록`에서 보이지 않음
  - `상태:취소` 조회는 지원하지 않음

- 대시보드 빠른 등록 V2(플래그: `FEATURE_TASK_QUICKREGISTER_V2`)
  - 1단계 모달 입력:
    - 제목(필수), 링크(선택), 마감일(선택), 알림 시간/옵션(선택)
  - 2단계 설정(ephemeral):
    - 채널 선택, 역할 선택(선택), 멘션 여부, 미리보기, 등록 확정/취소
  - 기본값:
    - 길드 기본값(`default_task_channel_id`, `default_notify_role_id`)
    - 사용자 최근값(`guild_user_task_preferences`)
  - 예외 처리:
    - 채널 접근 불가 시 재선택 유도
    - 역할 멘션 불가 시 멘션 없이 등록

## 설정
- `/설정 운영진역할 역할:@운영진`
  - 설명: 운영진 역할을 guild_config.admin_role_id로 설정
  - 권한: 운영진 또는 Manage Server/Administrator

- `/설정 운영진조회`
  - 설명: 현재 운영진 역할 조회
  - 응답: 미설정 상태면 설정 방법(`/설정 운영진역할 역할:@운영진`) 안내
  - 권한: 전체 (권장: ephemeral)

- `/설정 운영진해제`
  - 설명: 운영진 역할 설정을 해제(`admin_role_id = null`)
  - 사용 예: 운영진 역할을 잘못 지정했거나 삭제된 역할로 잠긴 경우 복구
  - 권한: 운영진 또는 Manage Server/Administrator

## 알림 입력 포맷
- 예시: `"2026-03-01 21:30"`
- 해석: `Asia/Seoul` 로컬 시각으로 입력
- 저장: DB에는 UTC(`TIMESTAMPTZ`)로 저장
- 표시/알림: 사용자에게는 `Asia/Seoul`로 표시
- 참고: DB 조회 시 `+00`으로 보이면 정상(UTC 저장)입니다.

## 운영 메모
- 명령어 이름은 `모각코`로 고정합니다. (`모각고` 오타 금지)
- 데이터 기준 시간대는 `Asia/Seoul`입니다.
- 상세 정책(권한/에러/스키마)은 `DOCS/API_SPECIFICATION.md`를 따릅니다.
